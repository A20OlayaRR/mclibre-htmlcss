<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Accesibilidad. Páginas web HTML y hojas de estilo CSS. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../varios/htmlcss.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.ico">
  <link rel="stylesheet" type="text/css" href="../varios/highlight-htmlcss.css">
  <script src="../varios/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
</head>

<body onload="leecolorHsl(); comprueba()">
  <h1>Accesibilidad</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-html5.svg" alt="Índice de HTML/CSS" title="Índice de HTML/CSS" width="42" height="48"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>Accesibilidad</h2>

      <ul>
        <li><a href="#contraste">Contraste</a></li>
      </ul>
    </div>
  </nav>

  <p>Esta lección contiene explicaciones ampliadas de algunos temas que se tratan en otras lecciones. Las he incluido aquí para aligerar las otras lecciones.</p>

  <section id="contraste">
    <h2>Contraste</h2>

    <p>El cuadro siguiente permite generar colores HSL moviendo los deslizadores:</p>

    <table class="mcl-centrado" style="border: black 2px solid; padding: 10px">
      <tbody>
        <tr>
          <td></td>
          <td></td>
          <td>Valor</td>
        </tr>
        <tr>
          <td>Matiz:</td>
          <td><input type="range" name="points" min="0" max="360" id="matiz"></td>
          <td class="mcl-centrado"><span id="nMatiz"></span></td>
        </tr>
        <tr>
          <td>Saturación:</td>
          <td><input type="range" name="points" min="0" max="100" id="saturacion"></td>
          <td class="mcl-centrado"><span id="nSaturacion"></span></td>
        </tr>
        <tr>
          <td>Luminosidad:</td>
          <td><input type="range" name="points" min="0" max="100" id="luminosidad"></td>
          <td class="mcl-centrado"><span id="nLuminosidad"></span></td>
        </tr>
        <tr>
          <td colspan="3" class="mcl-centrado">
            <p>Código HSL: <strong id="colorHsl"></strong></p>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="400" height="100" viewBox="0 0 400 100">
              <rect x="10" y="10" width="380" height="80" stroke="black" fill="black" id="rectanguloHsl" />
            </svg>
          </td>
        </tr>
      </tbody>
    </table>

    <pre id="transformacion"></pre>

    <script>
      var matiz = document.getElementById("matiz");
      var saturacion = document.getElementById("saturacion");
      var luminosidad = document.getElementById("luminosidad");
      var nMatiz = document.getElementById("nMatiz");
      var nSaturacion = document.getElementById("nSaturacion");
      var nLuminosidad = document.getElementById("nLuminosidad");
      var colorHs = document.getElementById("colorHsl");
      var rectanguloHs = document.getElementById("rectanguloHsl");
      function leecolorHsl(e) {
        nMatiz.textContent = matiz.value;
        nSaturacion.textContent = saturacion.value + "%";
        nLuminosidad.textContent = luminosidad.value + "%";
        colorHs.textContent = "hsl(" + matiz.value + ", " + saturacion.value + "%, " + luminosidad.value + "%)";
        rectanguloHs.setAttribute("fill", "hsl(" + matiz.value + ", " + saturacion.value + "%, " + luminosidad.value + "%)");
      }

      function rgb_a_hsl(r, g, b) {
        r /= 255, g /= 255, b /= 255;

        var max = Math.max(r, g, b), min = Math.min(r, g, b);
        var h, s, l = (max + min) / 2;

        if (max == min) {
          h = s = 0; // achromatic
        } else {
          var d = max - min;
          s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

          switch (max) {
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
          }

          h /= 6;
        }

        return [h, s, l];
      }

      function hsl_a_rgb(h, s, l) {
        var r, g, b;

        if (s == 0) {
          r = g = b = l; // achromatic
        } else {
          function hue2rgb(p, q, t) {
            if (t < 0) t += 1;
            if (t > 1) t -= 1;
            if (t < 1 / 6) return p + (q - p) * 6 * t;
            if (t < 1 / 2) return q;
            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
            return p;
          }

          var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
          var p = 2 * l - q;

          r = hue2rgb(p, q, h + 1 / 3);
          g = hue2rgb(p, q, h);
          b = hue2rgb(p, q, h - 1 / 3);
        }

        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
      }

      function compruebaConversion() {
        var p = document.getElementById("transformacion");
        var salto = 1;
        for (r = 0; r < 255; r += salto) {
          for (g = 0; g < 255; g += salto) {
            for (b = 0; b < 255; b += salto) {
              hsl = rgb_a_hsl(r, g, b);
              rgb = hsl_a_rgb(hsl[0], hsl[1], hsl[2]);
              if (r != rgb[0] || g != rgb[1] || b != rgb[2]) {
                p.textContent += "ERROR" + "\n";
                p.textContent += "RGB1 = " + r + " " + g + " " + b + "\n";
                p.textContent += "HSL2 = " + hsl[0] + " " + hsl[1] + " " + hsl[2] + "\n";
                p.textContent += "RGB4 = " + rgb[0] + " " + rgb[1] + " " + rgb[2] + "\n";
                p.textContent += "\n\n";
              }
            }
          }
        }
      }

      matiz.addEventListener("change", leecolorHsl, false);
      saturacion.addEventListener("change", leecolorHsl, false);
      luminosidad.addEventListener("change", leecolorHsl, false);
    </script>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 14 de diciembre de 2018</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="http://www.mclibre.org/consultar/htmlcss/">Páginas web HTML y hojas de estilo CSS</a></strong> por <a href="http://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
